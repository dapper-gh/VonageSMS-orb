version: 2.1

description: >
  This orb allows one to send an SMS through the Vonage API.

display:
  source_url: "https://github.com/dapper-gh/VonageSMS-orb"

commands:
  sms:
    description: >
      Sends an SMS using the Vonage API.
    parameters:
      api_key:
        type: string
        default: "$VONAGE_API_KEY"
        description: "Your Vonage API key"
      api_secret:
        type: string
        default: "$VONAGE_API_SECRET"
        description: "Your Vonage API secret"
      vonage_number:
        type: string
        default: "$VONAGE_NUMBER"
        description: "The number associated with your Vonage account"
      recipient:
        type: string
        default: "$VONAGE_RECIPIENT"
        description: "The recipient of the SMS"
      message:
        type: string
        default: "Hello, world!"
        description: "The message to send to the recipient"
    steps:
      - run:
          name: Send request
          command: |-
            curl -X "POST" "https://rest.nexmo.com/sms/json" \
            -d "from=<<parameters.vonage_number>>" \
            -d "text=<<parameters.message>>" \
            -d "to=<<parameters.recipient>>" \
            -d "api_key=<<parameters.api_key>>" \
            -d "api_secret=<<parameters.api_secret>>"